<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>Library Admin Page</title> <link rel="stylesheet" href="styles.css"> <!-- Keep your existing CSS file --> </head> <body> <div class="admin-container"> <h1>Library Admin Page</h1> <p>Use the buttons below to manage the library.</p> <!-- Navigation Buttons --> <div style="text-align: center; margin-bottom: 20px;"> <button onclick="showSection('preordersSection')">View Preorders</button> <button onclick="showSection('stockSection')">View Stock</button> <button onclick="showSection('addBookSection')">Add New Book</button> </div> <!-- Preorders Section --> <div id="preordersSection" style="display: none;"> <h2>Preorders</h2> <table> <thead> <tr> <th>User</th> <th>Book</th> <th>Timestamp</th> </tr> </thead> <tbody> <?php try { $stmt = $pdo->prepare( 'SELECT t.timestamp, u.username, b.title FROM transactions t JOIN users u ON t.user_id = u.id JOIN books b ON t.book_id = b.id WHERE t.action = :action' ); $stmt->execute(['action' => 'preorder']); while ($preorder = $stmt->fetch(PDO::FETCH_ASSOC)) { echo '<tr>'; echo '<td>' . htmlspecialchars($preorder['username']) . '</td>'; echo '<td>' . htmlspecialchars($preorder['title']) . '</td>'; echo '<td>' . htmlspecialchars($preorder['timestamp']) . '</td>'; echo '</tr>'; } } catch (PDOException $e) { echo '<tr><td colspan="3">Error: ' . htmlspecialchars($e->getMessage()) . '</td></tr>'; } ?> </tbody> </table> </div> <!-- Stock Section --> <div id="stockSection" style="display: none;"> <h2>Stock of Books</h2> <table> <thead> <tr> <th>Book Title</th> <th>Author</th> <th>Stock</th> </tr> </thead> <tbody> <?php try { $stmt = $pdo->query('SELECT title, author, stock FROM books'); while ($book = $stmt->fetch(PDO::FETCH_ASSOC)) { echo '<tr>'; echo '<td>' . htmlspecialchars($book['title']) . '</td>'; echo '<td>' . htmlspecialchars($book['author']) . '</td>'; echo '<td>' . htmlspecialchars($book['stock']) . '</td>'; echo '</tr>'; } } catch (PDOException $e) { echo '<tr><td colspan="3">Error: ' . htmlspecialchars($e->getMessage()) . '</td></tr>'; } ?> </tbody> </table> </div> <!-- Add Book Section --> <div id="addBookSection" style="display: none;"> <h2>Add New Book</h2> <form method="POST" action=""> <label for="title">Title:</label> <input type="text" id="title" name="title" required> <label for="author">Author:</label> <input type="text" id="author" name="author" required> <label for="stock">Stock:</label> <input type="number" id="stock" name="stock" min="0" required> <button type="submit" name="addBook">Add Book</button> </form> <?php if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_POST['addBook'])) { try { $stmt = $pdo->prepare( 'INSERT INTO books (title, author, stock) VALUES (:title, :author, :stock)' ); $stmt->execute([ 'title' => $_POST['title'], 'author' => $_POST['author'], 'stock' => $_POST['stock'], ]); echo '<p>New book added successfully!</p>'; } catch (PDOException $e) { echo '<p>Error: ' . htmlspecialchars($e->getMessage()) . '</p>'; } } ?> </div> </div> <script> function showSection(sectionId) { document.getElementById('preordersSection').style.display = 'none'; document.getElementById('stockSection').style.display = 'none'; document.getElementById('addBookSection').style.display = 'none'; document.getElementById(sectionId).style.display = 'block'; } </script> </body> </html>